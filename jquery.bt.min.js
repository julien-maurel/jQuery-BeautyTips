 /* jQuery BeautyTips 1.0.0 https://github.com/julien-maurel/jQuery-BeautyTips */
jQuery.bt={version:"1.0.0"},function($){jQuery.fn.bt=function(content,options){function drawIt(t,e){for(this.moveTo(t[0].x,t[0].y),i=1;i<t.length;i++)"arcStart"==t[i-1].type?(this.quadraticCurveTo(round5(t[i].x,e),round5(t[i].y,e),round5(t[(i+1)%t.length].x,e),round5(t[(i+1)%t.length].y,e)),i++):this.lineTo(round5(t[i].x,e),round5(t[i].y,e))}function round5(t,e){var o;return e=numb(e),o=e%2?t:Math.round(t-.5)+.5}function numb(t){return parseInt(t)||0}function arrayRemove(t,e){var o,s=[];for(o in t)t[o]!=e&&s.push(t[o]);return s}function canvasSupport(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d")}catch(e){t=!!document.createElement("canvas").getContext}return t}function shadowSupport(){try{var t=navigator.userAgent.toLowerCase();if(/webkit/.test(t))return!0;if(/gecko|mozilla/.test(t)){var e=t.match(/firefox\/(\d+(?:\.\d+)+)/);if(e&&e.length>=2&&parseFloat(e[1])>=3.1)return!0}if(/trident\/5.0/.test(t))return!0;var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];if(e.length>=3&&"msie"==e[1]&&parseInt(e[2])>=9)return!0}catch(o){}return!1}function betweenPoint(t,e,o){var s,i;return t.x==e.x?(s=t.y<e.y?t.y+o:t.y-o,{x:t.x,y:s}):t.y==e.y?(i=t.x<e.x?t.x+o:t.x-o,{x:i,y:t.y}):void 0}function centerPoint(t,e,o){var s,i,n=e.x==t.x?o.x:t.x,r=e.y==t.y?o.y:t.y;return t.x<o.x?t.y>o.y?(s=180*(Math.PI/180),i=90*(Math.PI/180)):(s=90*(Math.PI/180),i=0):t.y>o.y?(s=270*(Math.PI/180),i=180*(Math.PI/180)):(s=0,i=270*(Math.PI/180)),{x:n,y:r,type:"center",startAngle:s,endAngle:i}}function findIntersect(t,e,o,s,i,n,r,p){if(i==r)return findIntersectY(t,e,o,s,i);if(n==p)return findIntersectX(t,e,o,s,n);var a=(e-s)/(t-o),h=e-a*t,c=(n-p)/(i-r),x=n-c*i,l=(x-h)/(a-c),f=a*l+h;return{x:l,y:f}}function findIntersectY(t,e,o,s,i){if(e==s)return{x:i,y:e};var n=(e-s)/(t-o),r=e-n*t,p=n*i+r;return{x:i,y:p}}function findIntersectX(t,e,o,s,i){if(t==o)return{x:t,y:i};var n=(e-s)/(t-o),r=e-n*t,p=(i-r)/n;return{x:p,y:i}}function interpretPosition(p,width,height,top,left){return"string"!=typeof p?p:eval(p.replace(/%/g,"/100*"+(width?width:height)).replace(/top/g,top).replace(/bottom/g,top+height).replace(/left/g,left).replace(/right/g,left+width).replace(/px/g,""))}if("string"!=typeof content){var contentSelect=!0;options=content,content=!1}else var contentSelect=!1;return jQuery.fn.hoverIntent&&"hover"==jQuery.bt.defaults.trigger&&(jQuery.bt.defaults.trigger="hoverIntent"),this.each(function(index){var opts=jQuery.extend(!1,jQuery.bt.defaults,jQuery.bt.options,options),target=this;opts.spikeLength=numb(opts.spikeLength),opts.spikeGirth=numb(opts.spikeGirth),opts.overlap=numb(opts.overlap);var ajaxTimeout=!1;if(opts.killTitle&&$(this).find("[title]").andSelf().each(function(){$(this).attr("bt-xTitle")||$(this).attr("bt-xTitle",$(this).attr("title")).attr("title","")}),"string"==typeof opts.trigger&&(opts.trigger=[opts.trigger]),opts.trigger.length>1)opts.trigger[0]!=opts.trigger[1]?$(this).bind(opts.trigger[0],function(){this.btOn()}).bind(opts.trigger[1],function(){this.btOff()}):$(this).bind(opts.trigger[0],function(){$(this).hasClass("bt-active")?this.btOff():this.btOn()});else if("hoverIntent"==opts.trigger[0]){var hoverOpts=jQuery.extend(opts.hoverIntentOpts,{over:function(){this.btOn()},out:function(){this.btOff()}});$(this).hoverIntent(hoverOpts)}else"hover"==opts.trigger[0]?$(this).hover(function(){this.btOn()},function(){this.btOff()}):"now"==opts.trigger[0]?$(this).hasClass("bt-active")?this.btOff():this.btOn():"none"==opts.trigger[0];this.btOn=function(refreshBoxOnly){var self=this;if(!refreshBoxOnly){if("object"==typeof $(this).data("bt-box")){if("outbox"==opts.trigger[1])return;this.btOff()}if(opts.preBuild.apply(this),$(jQuery.bt.vars.closeWhenOpenStack).btOff(),$(this).addClass("bt-active "+opts.activeClass),contentSelect&&null==opts.ajaxPath&&(opts.killTitle&&$(this).attr("title",$(this).attr("bt-xTitle")),content=$.isFunction(opts.contentSelector)?opts.contentSelector.apply(this):eval(opts.contentSelector),opts.killTitle&&$(this).attr("title","")),null!=opts.ajaxPath&&0==content){if("object"==typeof opts.ajaxPath){var url=eval(opts.ajaxPath[0]);url+=opts.ajaxPath[1]?" "+opts.ajaxPath[1]:""}else var url=opts.ajaxPath;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var cacheData=opts.ajaxCache?$(document.body).data("btCache-"+url.replace(/\./g,"")):null;if("string"==typeof cacheData)content=selector?$("<div/>").append(cacheData.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):cacheData;else{var ajaxOpts=jQuery.extend(!1,{type:opts.ajaxType,data:opts.ajaxData,cache:opts.ajaxCache,url:url,complete:function(t,e){"success"==e||"notmodified"==e?(opts.ajaxCache&&$(document.body).data("btCache-"+url.replace(/\./g,""),t.responseText),ajaxTimeout=!1,content=selector?$("<div/>").append(t.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):t.responseText):("timeout"==e&&(ajaxTimeout=!0),content=opts.ajaxError.replace(/%error/g,t.statusText)),$(target).hasClass("bt-active")&&target.btOn()}},opts.ajaxOpts);jQuery.ajax(ajaxOpts),content=opts.ajaxLoading}}}var shadowMarginX=0,shadowMarginY=0,shadowShiftX=0,shadowShiftY=0;if(opts.shadow&&!shadowSupport()&&(opts.shadow=!1,jQuery.extend(opts,opts.noShadowOpts)),opts.shadow&&(shadowMarginX=opts.shadowBlur>Math.abs(opts.shadowOffsetX)?2*opts.shadowBlur:opts.shadowBlur+Math.abs(opts.shadowOffsetX),shadowShiftX=opts.shadowBlur-opts.shadowOffsetX>0?opts.shadowBlur-opts.shadowOffsetX:0,shadowMarginY=opts.shadowBlur>Math.abs(opts.shadowOffsetY)?2*opts.shadowBlur:opts.shadowBlur+Math.abs(opts.shadowOffsetY),shadowShiftY=opts.shadowBlur-opts.shadowOffsetY>0?opts.shadowBlur-opts.shadowOffsetY:0),opts.offsetParent)var offsetParent=$(opts.offsetParent),offsetParentPos=offsetParent.offset(),pos=$(this).offset(),top=numb(pos.top)-numb(offsetParentPos.top)+numb($(this).css("margin-top"))-shadowShiftY,left=numb(pos.left)-numb(offsetParentPos.left)+numb($(this).css("margin-left"))-shadowShiftX;else var offsetParent="absolute"==$(this).css("position")?$(this).parents().eq(0).offsetParent():$(this).offsetParent(),pos=$(this).position(),top=numb(pos.top)+numb($(this).css("margin-top"))-shadowShiftY,left=numb(pos.left)+numb($(this).css("margin-left"))-shadowShiftX;var width=$(this).outerWidth(),height=$(this).outerHeight();if(refreshBoxOnly)$box=$(this).data("bt-box"),$text=$box.find(".bt-content");else{if("object"==typeof content){var original=content,clone=$(original).clone(!0).show(),origClones=$(original).data("bt-clones")||[];origClones.push(clone),$(original).data("bt-clones",origClones),$(clone).data("bt-orig",original),$(this).data("bt-content-orig",{original:original,clone:clone}),content=clone}if("null"==typeof content||""==content)return;var $text=$('<div class="bt-content"></div>').css({padding:opts.padding,position:"absolute",width:opts.shrinkToFit?"auto":opts.width,zIndex:opts.textzIndex,left:shadowShiftX,top:shadowShiftY}).css(opts.cssStyles),$box=$('<div class="bt-wrapper"></div>').append($text).addClass(opts.cssClass).css({position:"absolute",width:opts.width,zIndex:opts.wrapperzIndex,visibility:"hidden"}).appendTo(offsetParent);$text.append(content);var imgsl=0,imgs=$text.find("img").hide();imgs.load(function(){$(this).show(),target.btOn(!0),imgsl++,imgsl==imgs.length&&(content=!1)}),opts.closeButton&&jQuery('<div class="bt-close">&nbsp;</div>').click(function(){self.btOff()}).prependTo($box.find("div.bt-content:first")),jQuery.fn.bgiframe&&($text.bgiframe(),$box.bgiframe()),$(this).data("bt-box",$box)}var scrollTop=numb($(document).scrollTop()),scrollLeft=numb($(document).scrollLeft()),docWidth=numb($(window).width()),docHeight=numb($(window).height()),winRight=scrollLeft+docWidth,winBottom=scrollTop+docHeight,space={},thisOffset=$(this).offset();space.top=thisOffset.top-scrollTop,space.bottom=docHeight-(thisOffset+height-scrollTop),space.left=thisOffset.left-scrollLeft,space.right=docWidth-(thisOffset.left+width-scrollLeft);var textOutHeight=numb($text.outerHeight()),textOutWidth=numb($text.outerWidth());if(opts.positions.constructor==String&&(opts.positions=opts.positions.replace(/ /,"").split(",")),"most"==opts.positions[0]){var position="top";for(var pig in space)position=space[pig]>space[position]?pig:position}else for(var x in opts.positions){var position=opts.positions[x];if(("left"==position||"right"==position)&&space[position]>textOutWidth+opts.spikeLength)break;if(("top"==position||"bottom"==position)&&space[position]>textOutHeight+opts.spikeLength)break}var horiz=left+interpretPosition(opts.targetAlign,width,0,0,0)-interpretPosition(opts.align,textOutWidth,0,0,0),horizCenter=left+.5*width-.5*textOutWidth,vert=top+interpretPosition(opts.targetAlign,0,height,0,0)-interpretPosition(opts.align,0,textOutHeight,0,0),vertCenter=top+.5*height-.5*textOutHeight,points=[],textTop,textLeft,textRight,textBottom,textTopSpace,textBottomSpace,textLeftSpace,textRightSpace,crossPoint,textCenter,spikePoint;switch(position){case"top":$text.css("margin-bottom",opts.spikeLength+"px"),$box.css({top:top-$text.outerHeight(!0)+opts.overlap+opts.constantOverlap[1],left:horiz+opts.constantOverlap[0]});var xShift=0;opts.windowCheck&&(textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.outerWidth(!0)),0>textRightSpace&&($box.css("left",numb($box.css("left"))+textRightSpace+"px"),xShift-=textRightSpace),textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin),0>textLeftSpace&&($box.css("left",numb($box.css("left"))-textLeftSpace+"px"),xShift+=textLeftSpace)),textTop=$text.position().top+numb($text.css("margin-top")),textLeft=$text.position().left+numb($text.css("margin-left")),textRight=textLeft+$text.outerWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+interpretPosition(opts.centerPointX,textRight-textLeft,0,0,textLeft),y:textTop+interpretPosition(opts.centerPointY,0,textBottom-textTop,textTop,0)},xShift+=shadowShiftX+(horizCenter-horiz)+(interpretPosition(opts.targetCenterPointX,width,0,0,0)-.5*width),points[points.length]=spikePoint={x:.5*(textRight-textLeft)+xShift,y:textBottom+opts.spikeLength,type:"spike"};var overlap=interpretPosition(opts.spikeOverlapX,textRight-textLeft,0,0,-spikePoint.x);crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textBottom),crossPoint.x+=overlap,crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x,crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.CornerRadius:crossPoint.x,points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textBottom,type:"join"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textBottom,type:"join"},points[points.length]=spikePoint,points[0].x+=overlap;break;case"left":$text.css("margin-right",opts.spikeLength+"px"),$box.css({top:vert+opts.constantOverlap[1]+"px",left:left-$text.outerWidth(!0)+opts.overlap+opts.constantOverlap[0]+"px"});var yShift=0;opts.windowCheck&&(textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(!0)),0>textBottomSpace&&($box.css("top",numb($box.css("top"))+textBottomSpace+"px"),yShift-=textBottomSpace),textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin),0>textTopSpace&&($box.css("top",numb($box.css("top"))-textTopSpace+"px"),yShift+=textTopSpace)),textTop=$text.position().top+numb($text.css("margin-top")),textLeft=$text.position().left+numb($text.css("margin-left")),textRight=textLeft+$text.outerWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+interpretPosition(opts.centerPointX,textRight-textLeft,0,0,textLeft),y:textTop+interpretPosition(opts.centerPointY,0,textBottom-textTop,textTop,0)},yShift+=shadowShiftY+(vertCenter-vert)+(interpretPosition(opts.targetCenterPointY,0,height,0,0)-.5*height),points[points.length]=spikePoint={x:textRight+opts.spikeLength,y:.5*(textBottom-textTop)+yShift,type:"spike"};var overlap=interpretPosition(opts.spikeOverlapY,0,textBottom-textTop,-spikePoint.y,0);crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textRight),crossPoint.y+=overlap,crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y,crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y,points[points.length]={x:textRight,y:crossPoint.y+opts.spikeGirth/2,type:"join"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:crossPoint.y-opts.spikeGirth/2,type:"join"},points[points.length]=spikePoint,points[0].y+=overlap;break;case"bottom":$text.css("margin-top",opts.spikeLength+"px"),$box.css({top:top+height-opts.overlap-opts.constantOverlap[1],left:horiz+opts.constantOverlap[0]});var xShift=0;opts.windowCheck&&(textRightSpace=winRight-opts.windowMargin-($text.offset().left+$text.outerWidth(!0)),0>textRightSpace&&($box.css("left",numb($box.css("left"))+textRightSpace+"px"),xShift-=textRightSpace),textLeftSpace=$text.offset().left+numb($text.css("margin-left"))-(scrollLeft+opts.windowMargin),0>textLeftSpace&&($box.css("left",numb($box.css("left"))-textLeftSpace+"px"),xShift+=textLeftSpace)),textTop=$text.position().top+numb($text.css("margin-top")),textLeft=$text.position().left+numb($text.css("margin-left")),textRight=textLeft+$text.outerWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+interpretPosition(opts.centerPointX,textRight-textLeft,0,0,textLeft),y:textTop+interpretPosition(opts.centerPointY,0,textBottom-textTop,textTop,0)},xShift+=shadowShiftX+(horizCenter-horiz)+(interpretPosition(opts.targetCenterPointX,width,0,0,0)-.5*width),points[points.length]=spikePoint={x:.5*(textRight-textLeft)+xShift,y:shadowShiftY,type:"spike"};var overlap=interpretPosition(opts.spikeOverlapX,textRight-textLeft,0,0,-spikePoint.x);crossPoint=findIntersectX(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textTop),crossPoint.x+=overlap,crossPoint.x=crossPoint.x<textLeft+opts.spikeGirth/2+opts.cornerRadius?textLeft+opts.spikeGirth/2+opts.cornerRadius:crossPoint.x,crossPoint.x=crossPoint.x>textRight-opts.spikeGirth/2-opts.cornerRadius?textRight-opts.spikeGirth/2-opts.cornerRadius:crossPoint.x,points[points.length]={x:crossPoint.x+opts.spikeGirth/2,y:textTop,type:"join"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:crossPoint.x-opts.spikeGirth/2,y:textTop,type:"join"},points[points.length]=spikePoint,points[0].x+=overlap;break;case"right":$text.css("margin-left",opts.spikeLength+"px"),$box.css({top:vert+opts.constantOverlap[1]+"px",left:left+width-opts.overlap-opts.constantOverlap[0]+"px"});var yShift=0;opts.windowCheck&&(textBottomSpace=winBottom-opts.windowMargin-($text.offset().top+$text.outerHeight(!0)),0>textBottomSpace&&($box.css("top",numb($box.css("top"))+textBottomSpace+"px"),yShift-=textBottomSpace),textTopSpace=$text.offset().top+numb($text.css("margin-top"))-(scrollTop+opts.windowMargin),0>textTopSpace&&($box.css("top",numb($box.css("top"))-textTopSpace+"px"),yShift+=textTopSpace)),textTop=$text.position().top+numb($text.css("margin-top")),textLeft=$text.position().left+numb($text.css("margin-left")),textRight=textLeft+$text.outerWidth(),textBottom=textTop+$text.outerHeight(),textCenter={x:textLeft+interpretPosition(opts.centerPointX,textRight-textLeft,0,0,textLeft),y:textTop+interpretPosition(opts.centerPointY,0,textBottom-textTop,textTop,0)},yShift+=shadowShiftY+(vertCenter-vert)+(interpretPosition(opts.targetCenterPointY,0,height,0,0)-.5*height),points[points.length]=spikePoint={x:shadowShiftX,y:.5*(textBottom-textTop)+yShift,type:"spike"};var overlap=interpretPosition(opts.spikeOverlapY,0,textBottom-textTop,-spikePoint.y,0);crossPoint=findIntersectY(spikePoint.x,spikePoint.y,textCenter.x,textCenter.y,textLeft),crossPoint.y+=overlap,crossPoint.y=crossPoint.y<textTop+opts.spikeGirth/2+opts.cornerRadius?textTop+opts.spikeGirth/2+opts.cornerRadius:crossPoint.y,crossPoint.y=crossPoint.y>textBottom-opts.spikeGirth/2-opts.cornerRadius?textBottom-opts.spikeGirth/2-opts.cornerRadius:crossPoint.y,points[points.length]={x:textLeft,y:crossPoint.y-opts.spikeGirth/2,type:"join"},points[points.length]={x:textLeft,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textTop,type:"corner"},points[points.length]={x:textRight,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:textBottom,type:"corner"},points[points.length]={x:textLeft,y:crossPoint.y+opts.spikeGirth/2,type:"join"},points[points.length]=spikePoint,points[0].y+=overlap}$box.find("canvas").remove();var canvas=document.createElement("canvas");if($(canvas).attr("width",numb($text.outerWidth(!0))+2*opts.strokeWidth+shadowMarginX).attr("height",numb($text.outerHeight(!0))+2*opts.strokeWidth+shadowMarginY).appendTo($box).css({position:"absolute",zIndex:opts.boxzIndex}),"undefined"!=typeof G_vmlCanvasManager&&(canvas=G_vmlCanvasManager.initElement(canvas)),opts.cornerRadius>0){for(var newPoints=[],newPoint,i=0;i<points.length;i++)"corner"==points[i].type?(newPoint=betweenPoint(points[i],points[(i-1)%points.length],opts.cornerRadius),newPoint.type="arcStart",newPoints[newPoints.length]=newPoint,newPoints[newPoints.length]=points[i],newPoint=betweenPoint(points[i],points[(i+1)%points.length],opts.cornerRadius),newPoint.type="arcEnd",newPoints[newPoints.length]=newPoint):newPoints[newPoints.length]=points[i];points=newPoints}var ctx=canvas.getContext("2d");if(opts.shadow&&opts.shadowOverlap!==!0){var shadowOverlap=numb(opts.shadowOverlap);switch(position){case"top":opts.shadowOffsetX+opts.shadowBlur-shadowOverlap>0&&$box.css("top",numb($box.css("top"))-(opts.shadowOffsetX+opts.shadowBlur-shadowOverlap));break;case"right":shadowShiftX-shadowOverlap>0&&$box.css("left",numb($box.css("left"))+shadowShiftX-shadowOverlap);break;case"bottom":shadowShiftY-shadowOverlap>0&&$box.css("top",numb($box.css("top"))+shadowShiftY-shadowOverlap);break;case"left":opts.shadowOffsetY+opts.shadowBlur-shadowOverlap>0&&$box.css("left",numb($box.css("left"))-(opts.shadowOffsetY+opts.shadowBlur-shadowOverlap))}}if(drawIt.apply(ctx,[points],opts.strokeWidth),"object"==typeof opts.fill){if("gradient"==opts.fill.type){var grd=ctx.createLinearGradient(eval(opts.fill.x1),eval(opts.fill.y1),eval(opts.fill.x2),eval(opts.fill.y2));for(var i in opts.fill.colors)grd.addColorStop(opts.fill.colors[i].start,opts.fill.colors[i].color);ctx.fillStyle=grd}}else ctx.fillStyle=opts.fill;if(opts.shadow&&(ctx.shadowOffsetX=opts.shadowOffsetX,ctx.shadowOffsetY=opts.shadowOffsetY,ctx.shadowBlur=opts.shadowBlur,ctx.shadowColor=opts.shadowColor),ctx.closePath(),ctx.fill(),opts.strokeWidth>0&&(ctx.shadowColor="rgba(0, 0, 0, 0)",ctx.lineWidth=opts.strokeWidth,ctx.strokeStyle=opts.strokeStyle,ctx.beginPath(),drawIt.apply(ctx,[points],opts.strokeWidth),ctx.closePath(),ctx.stroke()),refreshBoxOnly)opts.postShow.apply(this,[$box[0]]);else{if(opts.preShow.apply(this,[$box[0],points]),$box.css({display:"none",visibility:"visible"}),opts.showTip.apply(this,[$box[0]]),opts.overlay){var overlay=$('<div class="bt-overlay"></div>').css({position:"absolute",backgroundColor:"blue",top:top,left:left,width:width,height:height,opacity:".2"}).appendTo(offsetParent);$(this).data("overlay",overlay)}(null!=opts.ajaxPath&&0==opts.ajaxCache&&!refreshBoxOnly&&!imgs.length||ajaxTimeout)&&(content=!1),opts.clickAnywhereToClose&&(jQuery.bt.vars.clickAnywhereStack.push(this),$(document).click(jQuery.bt.docClick)),opts.closeWhenOthersOpen&&jQuery.bt.vars.closeWhenOpenStack.push(this),opts.postShow.apply(this,[$box[0]]),"outbox"==opts.trigger[1]&&($box.mouseenter(function(){$(target).trigger("mouseenter.bt")}).mouseleave(function(){$(target).trigger("mouseleave.bt")}),$(target).bind("mouseenter.bt",function(){$(target).data("inbox",!0)}).bind("mouseleave.bt",function(){setTimeout(function(){$(target).data("inbox")||$(target).btOff()},20),$(target).data("inbox",!1)}))}},this.btOff=function(){var t=$(this).data("bt-box");opts.preHide.apply(this,[t]);var e=this;e.btCleanup=function(){var t=$(e).data("bt-box"),o=$(e).data("bt-content-orig"),s=$(e).data("bt-overlay");if("object"==typeof t&&($(t).remove(),$(e).removeData("bt-box")),"object"==typeof o){var i=$(o.original).data("bt-clones");$(o).data("bt-clones",arrayRemove(i,o.clone))}"object"==typeof s&&($(s).remove(),$(e).removeData("bt-overlay")),jQuery.bt.vars.clickAnywhereStack=arrayRemove(jQuery.bt.vars.clickAnywhereStack,e),jQuery.bt.vars.closeWhenOpenStack=arrayRemove(jQuery.bt.vars.closeWhenOpenStack,e),$(e).removeClass("bt-active "+opts.activeClass),$(e).unbind(".bt"),opts.postHide.apply(e)},opts.hideTip.apply(this,[t,e.btCleanup])};var refresh=this.btRefresh=function(){this.btOff(),this.btOn()}})},jQuery.fn.btOn=function(){return this.each(function(){jQuery.isFunction(this.btOn)&&this.btOn()})},jQuery.fn.btOff=function(){return this.each(function(){jQuery.isFunction(this.btOff)&&this.btOff()})},jQuery.bt.vars={clickAnywhereStack:[],closeWhenOpenStack:[]},jQuery.bt.docClick=function(t){if(!t)var t=window.event;!$(t.target).parents().andSelf().filter(".bt-wrapper, .bt-active").length&&jQuery.bt.vars.clickAnywhereStack.length&&($(jQuery.bt.vars.clickAnywhereStack).btOff(),$(document).unbind("click",jQuery.bt.docClick))},jQuery.bt.defaults={trigger:"hover",clickAnywhereToClose:!0,closeWhenOthersOpen:!1,shrinkToFit:!1,width:"200px",padding:"10px",spikeGirth:10,spikeLength:15,spikeOverlapX:0,spikeOverlapY:0,overlap:0,constantOverlap:[0,0],overlay:!1,killTitle:!0,textzIndex:9999,boxzIndex:9998,wrapperzIndex:9997,offsetParent:null,positions:["most"],fill:"rgb(255, 255, 102)",windowCheck:!0,windowMargin:10,strokeWidth:1,strokeStyle:"#000",cornerRadius:5,centerPointX:"50%",centerPointY:"50%",targetCenterPointX:"50%",targetCenterPointY:"50%",align:"50%",targetAlign:"50%",shadow:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:3,shadowColor:"#000",shadowOverlap:!1,noShadowOpts:{strokeStyle:"#999"},cssClass:"",cssStyles:{},activeClass:"bt-active",contentSelector:"$(this).attr('title')",ajaxPath:null,ajaxError:"<strong>ERROR:</strong> <em>%error</em>",ajaxLoading:"<blink>Loading...</blink>",ajaxData:{},ajaxType:"GET",ajaxCache:!0,ajaxOpts:{},preBuild:function(){},preShow:function(){},showTip:function(t){$(t).show()},postShow:function(){},preHide:function(){},hideTip:function(t,e){$(t).hide(),e()},postHide:function(){},hoverIntentOpts:{interval:300,timeout:500},closeButton:!1},jQuery.bt.options={}}(jQuery);